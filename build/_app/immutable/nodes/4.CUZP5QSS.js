import{a as S,t as T}from"../chunks/disclose-version.CUipO8R4.js";import"../chunks/legacy.BaD-mR7Z.js";import{k as X,s as Le,F as Ea,A as Aa,l as Na,j as Ma,a7 as Ca,_ as ra,H as Ia,m as Ke,o as Be,w as xe,W as Sa,az as Ie,p as la,t as sa,v as Ua,q as Ta,a1 as Qe,aA as Re,aB as We,aC as Ve,aD as Da,Z as Fa,aE as La,aF as Ba,aG as oa,a4 as Ha,aH as Ra,ah as Va,ac as Xe,aI as Oa,D as Ya,u as za,r as na,N as ia,aJ as va,aK as ca,Q as s,g as e,P as t,R as l,K as U,M as ua,O as B,h as da,I as E,J as He,n as Pa,aL as qa}from"../chunks/runtime.BIfulsMb.js";import{s as Y}from"../chunks/render.D6BlCGso.js";import{i as G}from"../chunks/if.BaJK5kSS.js";import{a as Ze,e as je}from"../chunks/forms.DrPt9Bdx.js";import{r as q,s as ye,a as oe}from"../chunks/attributes.c0VoCUeN.js";import{l as fa,e as Ee}from"../chunks/events.BnTA9Y8R.js";import{b as Ga}from"../chunks/this.B35XxqhV.js";import{i as _a}from"../chunks/lifecycle.Dqr-ogBj.js";import{p as de}from"../chunks/props.Dep3xOnE.js";import{c as $a}from"../chunks/index-client.xH2b0Xgx.js";function ea(i,a){return a}function Ja(i,a,r,u){for(var b=[],g=a.length,m=0;m<g;m++)Da(a[m].e,b,!0);var w=g>0&&b.length===0&&r!==null;if(w){var y=r.parentNode;Fa(y),y.append(r),u.clear(),Z(i,a[0].prev,a[g-1].next)}La(b,()=>{for(var D=0;D<g;D++){var h=a[D];w||(u.delete(h.k),Z(i,h.prev,h.next)),Ba(h.e,!w)}})}function aa(i,a,r,u,b,g=null){var m=i,w={flags:a,items:new Map,first:null},y=(a&oa)!==0;if(y){var D=i;m=X?Le(Ea(D)):D.appendChild(Aa())}X&&Na();var h=null,V=!1;Ma(()=>{var F=r(),c=Ca(F)?F:F==null?[]:ra(F),_=c.length;if(V&&_===0)return;V=_===0;let n=!1;if(X){var H=m.data===Ia;H!==(_===0)&&(m=Ke(),Le(m),Be(!1),n=!0)}if(X){for(var k=null,M,v=0;v<_;v++){if(xe.nodeType===8&&xe.data===Sa){m=xe,n=!0,Be(!1);break}var d=c[v],o=u(d,v);M=pa(xe,w,k,null,d,o,v,b,a),w.items.set(o,M),k=M}_>0&&Le(Ke())}if(!X){var f=Ha;Ka(c,w,m,b,a,(f.f&Ie)!==0,u)}g!==null&&(_===0?h?la(h):h=sa(()=>g(m)):h!==null&&Ua(h,()=>{h=null})),n&&Be(!0),r()}),X&&(m=xe)}function Ka(i,a,r,u,b,g,m,w){var _e,ne,pe,me;var y=(b&Ra)!==0,D=(b&(Re|Ve))!==0,h=i.length,V=a.items,F=a.first,c=F,_,n=null,H,k=[],M=[],v,d,o,f;if(y)for(f=0;f<h;f+=1)v=i[f],d=m(v,f),o=V.get(d),o!==void 0&&((_e=o.a)==null||_e.measure(),(H??(H=new Set)).add(o));for(f=0;f<h;f+=1){if(v=i[f],d=m(v,f),o=V.get(d),o===void 0){var j=c?c.e.nodes_start:r;n=pa(j,a,n,n===null?a.first:n.next,v,d,f,u,b),V.set(d,n),k=[],M=[],c=n.next;continue}if(D&&Qa(o,v,f,b),o.e.f&Ie&&(la(o.e),y&&((ne=o.a)==null||ne.unfix(),(H??(H=new Set)).delete(o))),o!==c){if(_!==void 0&&_.has(o)){if(k.length<M.length){var J=M[0],z;n=J.prev;var fe=k[0],ee=k[k.length-1];for(z=0;z<k.length;z+=1)ta(k[z],J,r);for(z=0;z<M.length;z+=1)_.delete(M[z]);Z(a,fe.prev,ee.next),Z(a,n,fe),Z(a,ee,J),c=J,n=ee,f-=1,k=[],M=[]}else _.delete(o),ta(o,c,r),Z(a,o.prev,o.next),Z(a,o,n===null?a.first:n.next),Z(a,n,o),n=o;continue}for(k=[],M=[];c!==null&&c.k!==d;)(g||!(c.e.f&Ie))&&(_??(_=new Set)).add(c),M.push(c),c=c.next;if(c===null)continue;o=c}k.push(o),n=o,c=o.next}if(c!==null||_!==void 0){for(var K=_===void 0?[]:ra(_);c!==null;)(g||!(c.e.f&Ie))&&K.push(c),c=c.next;var ae=K.length;if(ae>0){var Ae=b&oa&&h===0?r:null;if(y){for(f=0;f<ae;f+=1)(pe=K[f].a)==null||pe.measure();for(f=0;f<ae;f+=1)(me=K[f].a)==null||me.fix()}Ja(a,K,Ae,V)}}y&&Ta(()=>{var be;if(H!==void 0)for(o of H)(be=o.a)==null||be.apply()}),Qe.first=a.first&&a.first.e,Qe.last=n&&n.e}function Qa(i,a,r,u){u&Re&&We(i.v,a),u&Ve?We(i.i,r):i.i=r}function pa(i,a,r,u,b,g,m,w,y,D){var h=(y&Re)!==0,V=(y&Oa)===0,F=h?V?Va(b):Xe(b):b,c=y&Ve?Xe(m):m,_={i:c,v:F,k:g,a:null,e:null,prev:r,next:u};try{return _.e=sa(()=>w(i,F,c),X),_.e.prev=r&&r.e,_.e.next=u&&u.e,r===null?a.first=_:(r.next=_,r.e.next=_.e),u!==null&&(u.prev=_,u.e.prev=_.e),_}finally{}}function ta(i,a,r){for(var u=i.next?i.next.e.nodes_start:r,b=a?a.e.nodes_start:r,g=i.e.nodes_start;g!==u;){var m=Ya(g);b.before(g),g=m}}function Z(i,a,r){a===null?i.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}function ke(i,a,r=a){fa(i,"change",u=>{var b=u?i.defaultChecked:i.checked;r(b)}),(X&&i.defaultChecked!==i.checked||za(a)==null)&&r(i.checked),na(()=>{var u=a();i.checked=!!u})}function Wa(i,a,r=a){fa(i,"change",()=>{r(i.files)}),na(()=>{i.files=a()})}var Xa=T('<img class="avatar image">'),Za=T('<div class="avatar no-image"></div>'),ja=T('<div class="uppPoto svelte-u2ve22"><label class="button primary block" for="single"> </label> <input style="visibility: hidden; position:absolute;" type="file" id="single" accept="image/*"></div>'),et=T('<div><!> <input type="hidden" name="avatarUrl"> <!></div>');function at(i,a){ia(a,!1);let r=de(a,"size",8,10),u=de(a,"url",12),b=de(a,"supabase",8),g=B(null),m=B(!1),w=B();const y=$a(),D=async v=>{try{const{data:d,error:o}=await b().storage.from("avatars").download(v);if(o)throw o;const f=URL.createObjectURL(d);E(g,f)}catch(d){d instanceof Error&&console.log("Error downloading image: ",d.message)}},h=async()=>{try{if(E(m,!0),!e(w)||e(w).length===0)throw new Error("You must select an image to upload.");const v=e(w)[0],d=v.name.split(".").pop(),o=`${Math.random()}.${d}`,{error:f}=await b().storage.from("avatars").upload(o,v);if(f)throw f;u(o),setTimeout(()=>{y("upload")},100)}catch(v){v instanceof Error&&alert(v.message)}finally{E(m,!1)}};let V=de(a,"showUploadButton",8,!0);va(()=>da(u()),()=>{u()&&D(u())}),ca(),_a();var F=et(),c=s(F);{var _=v=>{var d=Xa();U(()=>{ye(d,"src",e(g)),ye(d,"alt",e(g)?"Avatar":"No image"),ye(d,"style",`height: ${r()??""}em; width: ${r()??""}em;`)}),S(v,d)},n=v=>{var d=Za();U(()=>ye(d,"style",`height: ${r()??""}em; width: ${r()??""}em;`)),S(v,d)};G(c,v=>{e(g)?v(_):v(n,!1)})}var H=t(c,2);q(H);var k=t(H,2);{var M=v=>{var d=ja(),o=s(d),f=s(o,!0);l(o);var j=t(o,2);l(d),U(()=>{ye(d,"style",`width: ${r()??""}em;`),Y(f,e(m)?"Uploading ...":"Upload"),j.disabled=e(m)}),Wa(j,()=>e(w),J=>E(w,J)),Ee("change",j,h),S(v,d)};G(k,v=>{V()&&v(M)})}l(F),U(()=>oe(H,u())),S(i,F),ua()}var tt=T('<form class="classicForm svelte-167owge" method="post" action="?/update"><!> <label for="email">Email <input id="email" type="text" disabled></label> <label for="fullName">Full Name <input id="fullName" name="fullName" type="text"></label> <label for="username">Username <input id="username" name="username" type="text"></label> <label for="contact">Contact <input id="contact" name="contact" type="text"></label> <div class="window-content"><button class="button-Ghost" type="submit">Update</button></div></form>'),rt=T('<tr class="svelte-167owge"><td class="svelte-167owge"> </td><td class="svelte-167owge"> </td><td class="svelte-167owge"> </td><td class="svelte-167owge"> </td><td class="svelte-167owge"><button class="ripple-btn">View</button></td></tr>'),lt=T('<div class="mobile-cards svelte-167owge"><div class="card"><p><strong>Full Name:</strong> </p> <p><strong>Email:</strong> </p> <p><strong>Submitted At:</strong> <br> </p> <button class="ripple-btn">View</button></div></div>'),st=T("<p><strong>Full Name:</strong> </p>"),ot=T("<p><strong>Contact:</strong> </p>"),nt=T("<p><strong>Message:</strong> </p>"),it=T("<p><strong>Viewed:</strong> </p>"),vt=T("<p><strong>Submitted At:</strong> </p>"),ct=T('<article id="messageDetail" class="detail-grid svelte-167owge"><!> <!> <!> <!> <!> <form action="?/updateMessageViewed" method="post"><label>Has been viewed: <input type="checkbox" name="viewed"></label> <input type="hidden" name="messageId"> <button class="button-Ghost svelte-167owge" type="submit">Update</button></form> <button class="ripple-btn svelte-167owge">Close Message</button></article>'),ut=T('<article class="filter-options svelte-167owge"><label>Show Viewed Messages <input type="checkbox"></label></article> <article class="summary svelte-167owge"><table class="desktop-table svelte-167owge"><thead><tr class="svelte-167owge"><th class="svelte-167owge">Full Name</th><th class="svelte-167owge">Contact</th><th class="svelte-167owge">Submit on</th><th class="svelte-167owge">Viewed</th><th class="svelte-167owge">Look</th></tr></thead><tbody></tbody></table> <!></article> <!>',1),dt=T(`<p class="svelte-167owge">Let's find out what we are eating today!</p> <button class="ripple-btn svelte-167owge">ðŸ¦–</button>`,1),ft=T('<header class="head_Line"><h1>Account</h1></header> <main><section class="whatsUp svelte-167owge"><ul><li><label for="accoutCheckbox">Account <input type="checkbox" id="viewedCheckbox"></label></li> <li><label for="messageBox">Message Box <input type="checkbox"></label></li> <li><label for="foodFinder">Food link <input type="checkbox"></label></li></ul></section> <section id="accountBox"><!></section> <section id="messageBox"><!></section> <section class="dinner-hunt svelte-167owge"><!></section> <form method="post" action="?/signout"><button class="button-Skew svelte-167owge">Sign Out</button></form></main>',1);function Nt(i,a){var ze,Pe,qe,Ge;ia(a,!1);let r=de(a,"data",8),u=de(a,"form",8),b=r(),g=B(b.session),m=B(b.supabase),w=B(b.profile),y=B(b.newMessage),D=B(),h=B(!1),V=((ze=e(w))==null?void 0:ze.full_name)??"",F=((Pe=e(w))==null?void 0:Pe.username)??"",c=((qe=e(w))==null?void 0:qe.contact)??"",_=B(((Ge=e(w))==null?void 0:Ge.avatar_url)??""),n=B(null),H=B(!1),k=B(!1),M=B(!1),v=B(!1);const d=p=>{E(n,p)};function o(p){const L=new Date(p);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit"}).format(L)}const f=()=>(E(h,!0),async()=>{E(h,!1)}),j=()=>(E(h,!0),async({update:p})=>{E(h,!1),p()}),J=()=>{window.location.href="https://table-tango.netlify.app/"};va(()=>(e(g),e(m),e(w),e(y),da(r())),()=>{(p=>(E(g,p.session),E(m,p.supabase),E(w,p.profile),E(y,p.newMessage)))(r())}),ca(),_a();var z=ft(),fe=t(He(z),2),ee=s(fe),K=s(ee),ae=s(K),Ae=s(ae),_e=t(s(Ae));q(_e),l(Ae),l(ae);var ne=t(ae,2),pe=s(ne),me=t(s(pe));q(me),l(pe),l(ne);var be=t(ne,2),Oe=s(be),Ye=t(s(Oe));q(Ye),l(Oe),l(be),l(K),l(ee);var Se=t(ee,2),ma=s(Se);{var ba=p=>{var L=tt(),P=s(L);at(P,{get supabase(){return e(m)},size:10,get url(){return e(_)},set url(A){E(_,A)},$$events:{upload:()=>{e(D).requestSubmit()}},$$legacy:!0});var ie=t(P,2),he=t(s(ie));q(he),l(ie);var te=t(ie,2),ve=t(s(te));q(ve),l(te);var ce=t(te,2),Ne=t(s(ce));q(Ne),l(ce);var ge=t(ce,2),Me=t(s(ge));q(Me),l(ge);var I=t(ge,2),C=s(I);l(I),l(L),Ze(L,(A,O)=>{var R;return(R=je)==null?void 0:R(A,O)},()=>f),Ga(L,A=>E(D,A),()=>e(D)),U(()=>{var A,O,R;oe(he,e(g).user.email),oe(ve,((A=u())==null?void 0:A.fullName)??V),oe(Ne,((O=u())==null?void 0:O.username)??F),oe(Me,((R=u())==null?void 0:R.contact)??c),oe(C,e(h)?"Loading...":"Update"),C.disabled=e(h)}),S(p,L)};G(ma,p=>{e(M)&&p(ba)})}l(Se);var Ue=t(Se,2),ha=s(Ue);{var ga=p=>{var L=ut(),P=He(L),ie=s(P),he=t(s(ie));q(he),l(ie),l(P);var te=t(P,2),ve=s(te),ce=t(s(ve));aa(ce,5,()=>e(y).filter(I=>I.viewed===e(k)),ea,(I,C)=>{var A=rt(),O=s(A),R=s(O,!0);l(O);var re=t(O),Q=s(re,!0);l(re);var le=t(re),W=s(le,!0);U(()=>Y(W,o(e(C).submitted_at))),l(le);var se=t(le),ue=s(se,!0);l(se);var Ce=t(se),we=s(Ce);l(Ce),l(A),U(()=>{Y(R,e(C).full_name),Y(Q,e(C).contact_point),Y(ue,e(C).viewed?"Yes":"No")}),Ee("click",we,()=>d(e(C))),S(I,A)}),l(ce),l(ve);var Ne=t(ve,2);aa(Ne,1,()=>e(y).filter(I=>I.viewed===e(k)),ea,(I,C)=>{var A=lt(),O=s(A),R=s(O),re=t(s(R));l(R);var Q=t(R,2),le=t(s(Q));l(Q);var W=t(Q,2),se=t(s(W),3);U(()=>Y(se,` ${o(e(C).submitted_at)??""}`)),l(W);var ue=t(W,2);l(O),l(A),U(()=>{Y(re,` ${e(C).full_name??""}`),Y(le,` ${e(C).email??""}`)}),Ee("click",ue,()=>d(e(C))),S(I,A)}),l(te);var ge=t(te,2);{var Me=I=>{var C=ct(),A=s(C);{var O=x=>{var N=st(),$=t(s(N));l(N),U(()=>Y($,` ${e(n).full_name??""}`)),S(x,N)};G(A,x=>{e(n).full_name&&x(O)})}var R=t(A,2);{var re=x=>{var N=ot(),$=t(s(N));l(N),U(()=>Y($,` ${e(n).contact_point??""}`)),S(x,N)};G(R,x=>{e(n).contact_point&&x(re)})}var Q=t(R,2);{var le=x=>{var N=nt(),$=t(s(N));l(N),U(()=>Y($,` ${e(n).message??""}`)),S(x,N)};G(Q,x=>{e(n).message&&x(le)})}var W=t(Q,2);{var se=x=>{var N=it(),$=t(s(N));l(N),U(()=>Y($,` ${(e(n).viewed?"Yes":"No")??""}`)),S(x,N)};G(W,x=>{e(n).viewed&&x(se)})}var ue=t(W,2);{var Ce=x=>{var N=vt(),$=t(s(N));U(()=>Y($,` ${o(e(n).submitted_at)??""}`)),l(N),S(x,N)};G(ue,x=>{e(n).submitted_at&&x(Ce)})}var we=t(ue,2),Fe=s(we),$e=t(s(Fe));q($e),l(Fe);var Je=t(Fe,2);q(Je),Pa(2),l(we);var ka=t(we,2);l(C),U(()=>oe(Je,e(n).id)),ke($e,()=>e(n).viewed,x=>qa(n,e(n).viewed=x)),Ee("click",ka,()=>E(n,null)),S(I,C)};G(ge,I=>{e(n)&&I(Me)})}ke(he,()=>e(k),I=>E(k,I)),S(p,L)};G(ha,p=>{e(H)&&p(ga)})}l(Ue);var Te=t(Ue,2),wa=s(Te);{var xa=p=>{var L=dt(),P=t(He(L),2);Ee("click",P,J),S(p,L)};G(wa,p=>{e(v)&&p(xa)})}l(Te);var De=t(Te,2),ya=s(De);l(De),Ze(De,(p,L)=>{var P;return(P=je)==null?void 0:P(p,L)},()=>j),l(fe),U(()=>ya.disabled=e(h)),ke(_e,()=>e(M),p=>E(M,p)),ke(me,()=>e(H),p=>E(H,p)),ke(Ye,()=>e(v),p=>E(v,p)),S(i,z),ua()}export{Nt as component};
