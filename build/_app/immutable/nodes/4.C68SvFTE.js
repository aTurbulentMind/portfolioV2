import{a as F,t as H}from"../chunks/disclose-version.CBMkT34e.js";import"../chunks/legacy.DHcSImdh.js";import{k as W,s as Te,ak as xa,ag as ka,l as Ea,j as Aa,O as Na,ar as ra,H as Ca,m as Ke,o as Ue,w as we,an as Ma,ay as Me,p as sa,t as ia,v as Ia,q as Sa,T as Xe,az as Fe,aA as Qe,aB as De,aC as Ta,aq as Ua,aD as Fa,aE as Da,aF as na,R as Ha,aG as La,af as Ra,_ as We,aH as Ba,aj as Va,u as Oa,r as oa,G as va,aI as da,aJ as ua,K as i,g as e,J as l,M as s,D,F as ca,I as L,h as fa,B as k,C as Ze,n as Ya,aK as qa}from"../chunks/runtime.N3Dx3tGb.js";import{s as V}from"../chunks/render.BBftsVBs.js";import{i as P}from"../chunks/if.BDlNAjro.js";import{a as je,e as ea}from"../chunks/forms.RGhdu3ql.js";import{r as G,s as ye,a as se}from"../chunks/attributes.CccAmMY_.js";import{l as _a,e as ke}from"../chunks/events.DnkfBsq4.js";import{b as za}from"../chunks/this.D0IpyM3B.js";import{i as ma}from"../chunks/lifecycle.twozWMe5.js";import{p as ue}from"../chunks/props.BAB0o5CS.js";import{c as Ga}from"../chunks/index-client.BGjSFx8M.js";function aa(n,a){return a}function Pa(n,a,r,u){for(var _=[],w=a.length,f=0;f<w;f++)Ta(a[f].e,_,!0);var g=w>0&&_.length===0&&r!==null;if(g){var M=r.parentNode;Ua(M),M.append(r),u.clear(),Z(n,a[0].prev,a[w-1].next)}Fa(_,()=>{for(var N=0;N<w;N++){var m=a[N];g||(u.delete(m.k),Z(n,m.prev,m.next)),Da(m.e,!g)}})}function ta(n,a,r,u,_,w=null){var f=n,g={flags:a,items:new Map,first:null},M=(a&na)!==0;if(M){var N=n;f=W?Te(xa(N)):N.appendChild(ka())}W&&Ea();var m=null,q=!1;Aa(()=>{var v=r(),h=Na(v)?v:v==null?[]:ra(v),p=h.length;if(q&&p===0)return;q=p===0;let b=!1;if(W){var x=f.data===Ca;x!==(p===0)&&(f=Ke(),Te(f),Ue(!1),b=!0)}if(W){for(var C=null,S,d=0;d<p;d++){if(we.nodeType===8&&we.data===Ma){f=we,b=!0,Ue(!1);break}var t=h[d],o=u(t,d);S=pa(we,g,C,null,t,o,d,_,a),g.items.set(o,S),C=S}p>0&&Te(Ke())}if(!W){var O=Ha;$a(h,g,f,_,a,(O.f&Me)!==0,u)}w!==null&&(p===0?m?sa(m):m=ia(()=>w(f)):m!==null&&Ia(m,()=>{m=null})),b&&Ue(!0),r()}),W&&(f=we)}function $a(n,a,r,u,_,w,f){var fe,ie,_e,me;var g=(_&La)!==0,M=(_&(Fe|De))!==0,N=n.length,m=a.items,q=a.first,v=q,h,p=null,b,x=[],C=[],S,d,t,o;if(g)for(o=0;o<N;o+=1)S=n[o],d=f(S,o),t=m.get(d),t!==void 0&&((fe=t.a)==null||fe.measure(),(b??(b=new Set)).add(t));for(o=0;o<N;o+=1){if(S=n[o],d=f(S,o),t=m.get(d),t===void 0){var O=v?v.e.nodes_start:r;p=pa(O,a,p,p===null?a.first:p.next,S,d,o,u,_),m.set(d,p),x=[],C=[],v=p.next;continue}if(M&&Ja(t,S,o,_),t.e.f&Me&&(sa(t.e),g&&((ie=t.a)==null||ie.unfix(),(b??(b=new Set)).delete(t))),t!==v){if(h!==void 0&&h.has(t)){if(x.length<C.length){var $=C[0],Y;p=$.prev;var ce=x[0],j=x[x.length-1];for(Y=0;Y<x.length;Y+=1)la(x[Y],$,r);for(Y=0;Y<C.length;Y+=1)h.delete(C[Y]);Z(a,ce.prev,j.next),Z(a,p,ce),Z(a,j,$),v=$,p=j,o-=1,x=[],C=[]}else h.delete(t),la(t,v,r),Z(a,t.prev,t.next),Z(a,t,p===null?a.first:p.next),Z(a,p,t),p=t;continue}for(x=[],C=[];v!==null&&v.k!==d;)(w||!(v.e.f&Me))&&(h??(h=new Set)).add(v),C.push(v),v=v.next;if(v===null)continue;t=v}x.push(t),p=t,v=t.next}if(v!==null||h!==void 0){for(var K=h===void 0?[]:ra(h);v!==null;)(w||!(v.e.f&Me))&&K.push(v),v=v.next;var ee=K.length;if(ee>0){var Ee=_&na&&N===0?r:null;if(g){for(o=0;o<ee;o+=1)(_e=K[o].a)==null||_e.measure();for(o=0;o<ee;o+=1)(me=K[o].a)==null||me.fix()}Pa(a,K,Ee,m)}}g&&Sa(()=>{var pe;if(b!==void 0)for(t of b)(pe=t.a)==null||pe.apply()}),Xe.first=a.first&&a.first.e,Xe.last=p&&p.e}function Ja(n,a,r,u){u&Fe&&Qe(n.v,a),u&De?Qe(n.i,r):n.i=r}function pa(n,a,r,u,_,w,f,g,M){var N=(M&Fe)!==0,m=(M&Ba)===0,q=N?m?Ra(_):We(_):_,v=M&De?We(f):f,h={i:v,v:q,k:w,a:null,e:null,prev:r,next:u};try{return h.e=ia(()=>g(n,q,v),W),h.e.prev=r&&r.e,h.e.next=u&&u.e,r===null?a.first=h:(r.next=h,r.e.next=h.e),u!==null&&(u.prev=h,u.e.prev=h.e),h}finally{}}function la(n,a,r){for(var u=n.next?n.next.e.nodes_start:r,_=a?a.e.nodes_start:r,w=n.e.nodes_start;w!==u;){var f=Va(w);_.before(w),w=f}}function Z(n,a,r){a===null?n.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}function xe(n,a,r=a){_a(n,"change",u=>{var _=u?n.defaultChecked:n.checked;r(_)}),(W&&n.defaultChecked!==n.checked||Oa(a)==null)&&r(n.checked),oa(()=>{var u=a();n.checked=!!u})}function Ka(n,a,r=a){_a(n,"change",()=>{r(n.files)}),oa(()=>{n.files=a()})}var Xa=H('<img class="avatar image">'),Qa=H('<div class="avatar no-image"></div>'),Wa=H('<div class="uppPoto svelte-u2ve22"><label class="button primary block" for="single"> </label> <input style="visibility: hidden; position:absolute;" type="file" id="single" accept="image/*"></div>'),Za=H('<div><!> <input type="hidden" name="avatarUrl"> <!></div>');function ja(n,a){va(a,!1);let r=ue(a,"size",8,10),u=ue(a,"url",12),_=ue(a,"supabase",8),w=L(null),f=L(!1),g=L();const M=Ga(),N=async d=>{try{const{data:t,error:o}=await _().storage.from("avatars").download(d);if(o)throw o;const O=URL.createObjectURL(t);k(w,O)}catch(t){t instanceof Error&&console.log("Error downloading image: ",t.message)}},m=async()=>{try{if(k(f,!0),!e(g)||e(g).length===0)throw new Error("You must select an image to upload.");const d=e(g)[0],t=d.name.split(".").pop(),o=`${Math.random()}.${t}`,{error:O}=await _().storage.from("avatars").upload(o,d);if(O)throw O;u(o),setTimeout(()=>{M("upload")},100)}catch(d){d instanceof Error&&alert(d.message)}finally{k(f,!1)}};let q=ue(a,"showUploadButton",8,!0);da(()=>fa(u()),()=>{u()&&N(u())}),ua(),ma();var v=Za(),h=i(v);{var p=d=>{var t=Xa();D(()=>{ye(t,"src",e(w)),ye(t,"alt",e(w)?"Avatar":"No image"),ye(t,"style",`height: ${r()??""}em; width: ${r()??""}em;`)}),F(d,t)},b=d=>{var t=Qa();D(()=>ye(t,"style",`height: ${r()??""}em; width: ${r()??""}em;`)),F(d,t)};P(h,d=>{e(w)?d(p):d(b,!1)})}var x=l(h,2);G(x);var C=l(x,2);{var S=d=>{var t=Wa(),o=i(t),O=i(o,!0);s(o);var $=l(o,2);s(t),D(()=>{ye(t,"style",`width: ${r()??""}em;`),V(O,e(f)?"Uploading ...":"Upload"),$.disabled=e(f)}),Ka($,()=>e(g),Y=>k(g,Y)),ke("change",$,m),F(d,t)};P(C,d=>{q()&&d(S)})}s(v),D(()=>se(x,u())),F(n,v),ca()}var et=H('<form class="classicForm svelte-1l6g39a" method="post" action="?/update"><!> <label for="email">Email <input id="email" type="text" disabled></label> <label for="fullName">Full Name <input id="fullName" name="fullName" type="text"></label> <label for="username">Username <input id="username" name="username" type="text"></label> <label for="contact">Contact <input id="contact" name="contact" type="text"></label> <div class="window-content"><button class="button-Ghost" type="submit">Update</button></div></form>'),at=H('<tr class="svelte-1l6g39a"><td class="svelte-1l6g39a"> </td><td class="svelte-1l6g39a"> </td><td class="svelte-1l6g39a"> </td><td class="svelte-1l6g39a"> </td><td class="svelte-1l6g39a"><button class="ripple-btn">View</button></td></tr>'),tt=H('<div class="mobile-cards svelte-1l6g39a"><div class="card"><div><strong>Full Name:</strong> </div> <div><strong>Email:</strong> </div> <div><strong>Submitted At:</strong> <br> </div> <button class="ripple-btn">View</button></div></div>'),lt=H('<div class="svelte-1l6g39a"><strong class="svelte-1l6g39a">Full Name:</strong> </div>'),rt=H('<div class="svelte-1l6g39a"><strong class="svelte-1l6g39a">Contact:</strong> </div>'),st=H('<div class="svelte-1l6g39a"><strong class="svelte-1l6g39a">Message:</strong> </div>'),it=H('<div class="svelte-1l6g39a"><strong class="svelte-1l6g39a">Viewed:</strong> </div>'),nt=H('<div class="svelte-1l6g39a"><strong class="svelte-1l6g39a">Submitted At:</strong> </div>'),ot=H('<div class="detail-grid svelte-1l6g39a"><!> <!> <!> <!> <!> <div class="svelte-1l6g39a"><form action="?/updateMessageViewed" method="post" class="svelte-1l6g39a"><label class="svelte-1l6g39a">Has been viewed: <input type="checkbox" name="viewed" class="svelte-1l6g39a"></label> <input type="hidden" name="messageId" class="svelte-1l6g39a"> <button class="button-Ghost svelte-1l6g39a" type="submit">Update</button></form></div> <button class="ripple-btn svelte-1l6g39a">Close Message</button></div>'),vt=H('<div class="filter-options svelte-1l6g39a"><label>Show Viewed Messages <input type="checkbox"></label></div> <div class="summary svelte-1l6g39a"><table class="desktop-table svelte-1l6g39a"><thead><tr class="svelte-1l6g39a"><th class="svelte-1l6g39a">Full Name</th><th class="svelte-1l6g39a">Contact</th><th class="svelte-1l6g39a">Submit on</th><th class="svelte-1l6g39a">Viewed</th><th class="svelte-1l6g39a">Look</th></tr></thead><tbody></tbody></table> <!></div> <!>',1),dt=H(`<section class="dinner-hunt svelte-1l6g39a"><p class="svelte-1l6g39a">Let's find out what we are eating today!</p> <button class="ripple-btn svelte-1l6g39a">ðŸ¦–</button></section>`),ut=H('<header class="head_Line"><h1>Account</h1></header> <div class="whatsUp svelte-1l6g39a"><ul><li><label for="accoutCheckbox">Account <input type="checkbox" id="viewedCheckbox"></label></li> <li><label for="messageBox">Message Box <input type="checkbox"></label></li> <li><label for="foodFinder">Food link <input type="checkbox"></label></li></ul></div> <!> <!> <!> <form method="post" action="?/signout"><div><button class="button-Skew svelte-1l6g39a">Sign Out</button></div></form>',1);function Et(n,a){var Ye,qe,ze,Ge;va(a,!1);let r=ue(a,"data",8),u=ue(a,"form",8),_=r(),w=L(_.session),f=L(_.supabase),g=L(_.profile),M=L(_.newMessage),N=L(),m=L(!1),q=((Ye=e(g))==null?void 0:Ye.full_name)??"",v=((qe=e(g))==null?void 0:qe.username)??"",h=((ze=e(g))==null?void 0:ze.contact)??"",p=L(((Ge=e(g))==null?void 0:Ge.avatar_url)??""),b=L(null),x=L(!1),C=L(!1),S=L(!1),d=L(!1);const t=c=>{k(b,c)};function o(c){const T=new Date(c);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit"}).format(T)}const O=()=>(k(m,!0),async()=>{k(m,!1)}),$=()=>(k(m,!0),async({update:c})=>{k(m,!1),c()}),Y=()=>{window.location.href="https://table-tango.netlify.app/"};da(()=>(e(w),e(f),e(g),e(M),fa(r())),()=>{(c=>(k(w,c.session),k(f,c.supabase),k(g,c.profile),k(M,c.newMessage)))(r())}),ua(),ma();var ce=ut(),j=l(Ze(ce),2),K=i(j),ee=i(K),Ee=i(ee),fe=l(i(Ee));G(fe),s(Ee),s(ee);var ie=l(ee,2),_e=i(ie),me=l(i(_e));G(me),s(_e),s(ie);var pe=l(ie,2),He=i(pe),Le=l(i(He));G(Le),s(He),s(pe),s(K),s(j);var Re=l(j,2);{var ba=c=>{var T=et(),z=i(T);ja(z,{get supabase(){return e(f)},size:10,get url(){return e(p)},set url(E){k(p,E)},$$events:{upload:()=>{e(N).requestSubmit()}},$$legacy:!0});var ne=l(z,2),be=l(i(ne));G(be),s(ne);var ae=l(ne,2),oe=l(i(ae));G(oe),s(ae);var ve=l(ae,2),Ae=l(i(ve));G(Ae),s(ve);var ge=l(ve,2),Ne=l(i(ge));G(Ne),s(ge);var U=l(ge,2),I=i(U);s(U),s(T),je(T,(E,B)=>{var R;return(R=ea)==null?void 0:R(E,B)},()=>O),za(T,E=>k(N,E),()=>e(N)),D(()=>{var E,B,R;se(be,e(w).user.email),se(oe,((E=u())==null?void 0:E.fullName)??q),se(Ae,((B=u())==null?void 0:B.username)??v),se(Ne,((R=u())==null?void 0:R.contact)??h),se(I,e(m)?"Loading...":"Update"),I.disabled=e(m)}),F(c,T)};P(Re,c=>{e(S)&&c(ba)})}var Be=l(Re,2);{var ga=c=>{var T=vt(),z=Ze(T),ne=i(z),be=l(i(ne));G(be),s(ne),s(z);var ae=l(z,2),oe=i(ae),ve=l(i(oe));ta(ve,5,()=>e(M).filter(U=>U.viewed===e(C)),aa,(U,I)=>{var E=at(),B=i(E),R=i(B,!0);s(B);var te=l(B),X=i(te,!0);s(te);var le=l(te),Q=i(le,!0);D(()=>V(Q,o(e(I).submitted_at))),s(le);var re=l(le),de=i(re,!0);s(re);var Ce=l(re),he=i(Ce);s(Ce),s(E),D(()=>{V(R,e(I).full_name),V(X,e(I).contact_point),V(de,e(I).viewed?"Yes":"No")}),ke("click",he,()=>t(e(I))),F(U,E)}),s(ve),s(oe);var Ae=l(oe,2);ta(Ae,1,()=>e(M).filter(U=>U.viewed===e(C)),aa,(U,I)=>{var E=tt(),B=i(E),R=i(B),te=l(i(R));s(R);var X=l(R,2),le=l(i(X));s(X);var Q=l(X,2),re=l(i(Q),3);D(()=>V(re,` ${o(e(I).submitted_at)??""}`)),s(Q);var de=l(Q,2);s(B),s(E),D(()=>{V(te,` ${e(I).full_name??""}`),V(le,` ${e(I).email??""}`)}),ke("click",de,()=>t(e(I))),F(U,E)}),s(ae);var ge=l(ae,2);{var Ne=U=>{var I=ot(),E=i(I);{var B=y=>{var A=lt(),J=l(i(A));s(A),D(()=>V(J,` ${e(b).full_name??""}`)),F(y,A)};P(E,y=>{e(b).full_name&&y(B)})}var R=l(E,2);{var te=y=>{var A=rt(),J=l(i(A));s(A),D(()=>V(J,` ${e(b).contact_point??""}`)),F(y,A)};P(R,y=>{e(b).contact_point&&y(te)})}var X=l(R,2);{var le=y=>{var A=st(),J=l(i(A));s(A),D(()=>V(J,` ${e(b).message??""}`)),F(y,A)};P(X,y=>{e(b).message&&y(le)})}var Q=l(X,2);{var re=y=>{var A=it(),J=l(i(A));s(A),D(()=>V(J,` ${(e(b).viewed?"Yes":"No")??""}`)),F(y,A)};P(Q,y=>{e(b).viewed&&y(re)})}var de=l(Q,2);{var Ce=y=>{var A=nt(),J=l(i(A));D(()=>V(J,` ${o(e(b).submitted_at)??""}`)),s(A),F(y,A)};P(de,y=>{e(b).submitted_at&&y(Ce)})}var he=l(de,2),Pe=i(he),Se=i(Pe),$e=l(i(Se));G($e),s(Se);var Je=l(Se,2);G(Je),Ya(2),s(Pe),s(he);var ya=l(he,2);s(I),D(()=>se(Je,e(b).id)),xe($e,()=>e(b).viewed,y=>qa(b,e(b).viewed=y)),ke("click",ya,()=>k(b,null)),F(U,I)};P(ge,U=>{e(b)&&U(Ne)})}xe(be,()=>e(C),U=>k(C,U)),F(c,T)};P(Be,c=>{e(x)&&c(ga)})}var Ve=l(Be,2);{var ha=c=>{var T=dt(),z=l(i(T),2);s(T),ke("click",z,Y),F(c,T)};P(Ve,c=>{e(d)&&c(ha)})}var Ie=l(Ve,2),Oe=i(Ie),wa=i(Oe);s(Oe),s(Ie),je(Ie,(c,T)=>{var z;return(z=ea)==null?void 0:z(c,T)},()=>$),D(()=>wa.disabled=e(m)),xe(fe,()=>e(S),c=>k(S,c)),xe(me,()=>e(x),c=>k(x,c)),xe(Le,()=>e(d),c=>k(d,c)),F(n,ce),ca()}export{Et as component};
